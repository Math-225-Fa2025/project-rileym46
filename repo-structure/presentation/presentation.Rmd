---
title: "Coffee Sales"
author: "Riley Martindale"
institute: "Math225 #61909"
date: "December 4, 2025"
output:
  xaringan::moon_reader:
    css: xaringan-themer.css
    lib_dir: libs
    nature:
      ratio: "16:9"
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r load-packages, include = FALSE}
# Add any additional packages you need to this chunk
library(tidyverse)
library(tidymodels)
library(palmerpenguins)
library(knitr)
library(xaringanthemer)
library(dplyr)
library(parsnip)
library(broom)
library(readr)
```

```{r setup, include=FALSE}
# For better figure resolution
knitr::opts_chunk$set(fig.retina = 3, dpi = 300, fig.width = 6, fig.asp = 0.618, out.width = "80%")
```

```{r load-data, include=FALSE, eval = TRUE}
coffee <- read_csv("../data/Coffe_sales.csv")
```

```{r echo = FALSE}
style_xaringan(
  title_slide_background_image = "img/dark_blue_gradient_background.jpg"
)
```


class: center, middle

## Using this dataset, I will analyze how to help this business thrive. By looking at factors such as time of day, drinks, day of the week, and price, I can look to see what business decisions would need to be made to reflect these trends. 


---

# The Dataset

- The data spans one year

- There are 3547 rows, each being a different coffee order 

- There are 11 columns: hour of the day (numerical), if the patron paid cash or card, money (price), the drink ordered, the time of day (morning, afternoon, evening), what day of the week it was, what month it was, the day of the week numerically (ex, 5 for Friday), the month numerically (ex. 3 for March), the exact date, and the exact time of sale. 
---


```{r glimpse, eval = TRUE, echo = TRUE}
tibble(coffee)
```

---

# Most Frequent Hour of Day
```{r hour, eval = TRUE, echo = FALSE}
coffee %>%
  count(hour_of_day, sort = TRUE)
```
---
# Most Frequent Hour of Day
```{r bar-time, eval = TRUE, echo=FALSE}
coffee %>%
  ggplot(aes(y = Time_of_Day))+
  geom_bar()+
  labs(
    title = "Frequency of Sales based on Time Periods",
    y = "Time of Day",
    x = "Frequency"
  )
```
- 10 AM is the most popular hour, but afternoon is the most popular time of day
---

## Day of the Week

```{r day, eval = TRUE, echo = FALSE}
coffee %>%
  count(Weekdaysort, sort = TRUE)
```
- We can see that Tuesday is the most popular day of the week in the coffee shop

---

```{r time-day, eval = TRUE, echo = FALSE}
coffee %>%
  ggplot(mapping = aes(x = Weekdaysort, y = hour_of_day))+
  geom_hex()+
  labs(
    title = "Time of Day and Day of Week",
    x = "Weekday",
    y = "Hour of Day"
  )
```
- More sales in mid morning and mid afternoon
- Dips in sales in the early morning and late at night
---

## Most Popular Drinks
```{r drink, eval = TRUE, echo=FALSE}
coffee %>%
  count(coffee_name, sort = TRUE)
```
---
## Most Popular Drinks
```{r bar, eval = TRUE, echo=FALSE}
coffee %>%
  ggplot(aes(y = coffee_name))+
  geom_bar()+
  labs(
    title = "Frequency of Drinks",
    y = "Drink",
    x = "Frequency"
  )
```
---
## Frequency of Drinks for Each Day of the Week
```{r violin, eval = TRUE, echo = FALSE}
coffee %>%
  ggplot(aes(y = coffee_name, x = Weekdaysort))+
  geom_violin()+
  labs(
    title = "Frequency of Drinks Each Day",
    y = "Drink",
    x = "Day of the Week"
  )
```
---
## Linear Regression 
- Compares the amount of money made with different days of the week
```{r linear, eval = TRUE, echo = FALSE}
day_money <- linear_reg() %>%
  set_engine("lm") %>%
  fit(money ~ Weekdaysort, data = coffee)
tidy(day_money)

glance(day_money)$r.squared
```
- The equation is money = 31.809 -0.0427* Weekdaysort 
- As the days of the week goes on, the total amount of money spent by each customer is expected to decrease 0.0427 dollars, or 4 cents
- The baseline for this is $31.81 spent 
- R^2 value is 0.0002980488. We can expect basically a 0% variability, more specifically, a 0.03% variability
---
## Conclusion
- Tuesday is the most popular day of the week
- 10 AM vs Afternoon
- Amount of money spent is expected to decline throughout the week
- Americano with milk is most popular
